Understand FreePastry: The first step is to understand the FreePastry library. Spend some time going through the tutorials provided in the repository to get a good understanding of how it works.
Setup the Environment: Setup your development environment. Make sure you have the right version of Java installed and your IDE is set up correctly. Include the pastry.jar you generated in your project's classpath.
Design the Node Class: You'll need a class to represent the nodes in your system. This class should include fields for the node ID and the children node IDs.
Design the Communication Protocol: Decide on the type of message the nodes will be sending. The message should contain the node ID and the children node IDs.
Implement the Subscription and Publishing Mechanism: Use the Scribe part of the FreePastry library for this. Nodes should subscribe to the "SimpleAggr" topic. The root node should periodically (every 5 seconds) publish a message asking for updates.
Implement the Message Handling: Nodes should react to the root's message by sending a message to their parent node with their node ID and their children's node IDs.
Collect and Output Node IDs at the Root: The root node should collect all the node IDs from the messages it receives and output them.
Implement the Tree Printing: You will need a way to print the tree structure. This will probably involve a recursive method that starts at the root and visits each node in turn, printing as it goes.
Implement the Logging: Create a logging system or use an existing one to log the publishing, delivering and updating messages.
Testing: Test your system with different numbers of nodes (10, 30, 1000) to ensure it works as expected.

Todo:
Continue to do step 4